# AI 대화에서 토큰 사용 최적화 전략 - 향상된 프롬프트 결과

# AI 대화에서 맥락 유지 및 토큰 제한 극복 전략

## 1. 개념 및 원칙

**토큰:**  AI 모델이 처리하는 텍스트의 기본 단위. 단어, 구두점, 심지어 단어의 일부분도 토큰으로 간주될 수 있습니다.  토큰 제한은 모델이 한 번에 처리할 수 있는 토큰의 최대 수를 의미합니다.  토큰 수를 초과하면 이전 대화 내용이 잘릴 수 있습니다.

**맥락 유지:**  장기적인 대화에서 이전 대화 내용을 기억하고 참조하여 일관성 있고 의미 있는 대화를 이어가는 것.  맥락 유실은 대화의 흐름을 끊고 AI의 응답 정확도와 관련성을 떨어뜨립니다.

**핵심 원칙:**

* **요약:**  중요한 정보만 간결하게 전달하여 토큰 사용을 최소화합니다.
* **선택적 기억:**  모든 대화 내용을 기억할 필요는 없습니다.  현재 질문에 꼭 필요한 정보만 선택적으로 기억하고 참조합니다.
* **구조화:**  대화 내용을 논리적으로 구조화하여 맥락을 명확히 합니다.
* **요청 명확화:**  AI에게 무엇을 원하는지 명확하고 간결하게 질문합니다.


## 2. 체계적 접근법

**단계 1: 목표 설정 및 범위 정의:**

* 프로젝트의 목표와 범위를 명확히 정의합니다.
* 필요한 정보와 대화의 예상 길이를 추정합니다.
* 토큰 제한을 고려하여 대화 범위를 조정합니다.

**단계 2: 정보 구조화 및 요약:**

* 대화 내용을 주제별로 분류하고 요약합니다.
* 핵심 키워드와 중요 정보를 추출합니다.
* 마인드맵, 표, 목록 등을 활용하여 정보를 시각적으로 정리합니다.

**단계 3:  효과적인 프롬프트 작성:**

* 명확하고 간결한 질문을 합니다.
* 이전 대화의 핵심 내용을 간략하게 요약하여 포함합니다.
* 필요한 경우, 참조해야 할 특정 정보를 명시적으로 지정합니다.
* "이전에 ~에 대해 이야기했듯이..." 와 같이 명시적으로 이전 맥락을 언급합니다.

**단계 4:  중간 결과 저장 및 관리:**

* 대화 내용을 정기적으로 요약하고 저장합니다.
* 노션, 구글 문서, 메모장 등을 활용하여 대화 기록을 체계적으로 관리합니다.
* 필요에 따라 대화 내용을 파일로 저장하고 불러옵니다.

**단계 5:  피드백 및 수정:**

* AI의 응답을 검토하고 맥락 유지 여부를 확인합니다.
* 필요에 따라 프롬프트와 대화 전략을 수정합니다.


## 3. 실용적 전략

* **대화 분할:**  장기적인 대화를 여러 개의 작은 대화 세션으로 나눕니다. 각 세션은 독립적인 목표를 가지고 진행됩니다.
* **요약 및 재진술:**  각 세션이 끝날 때마다 중요한 내용을 요약하고 AI에게 재진술을 요청합니다.  이를 통해 AI가 맥락을 유지하도록 돕습니다.
* **키워드 사용:**  핵심 키워드를 사용하여 이전 대화 내용을 참조합니다.
* **외부 메모리 활용:**  노션, 구글 드라이브 등 외부 저장소에 대화 내용을 저장하고 필요할 때 참조합니다.
* **대화 관리 도구 활용:**  LangChain과 같은 대화 관리 도구를 사용하여 맥락을 효과적으로 관리합니다.


## 4. 템플릿 및 도구

**프롬프트 템플릿:**

```
이전에 [이전 대화의 요약]에 대해 이야기했었습니다.  이어서, [현재 질문]에 대해 알고 싶습니다.  [필요한 추가 정보]도 함께 고려해주세요.
```

**외부 메모리 예시 (노션):**

| 세션 | 날짜 | 주제 | 요약 | 관련 파일 |
|---|---|---|---|---|
| 1 | 2024-10-27 | 프로젝트 개요 | ... |  [링크] |
| 2 | 2024-10-28 | 데이터 분석 | ... | [링크] |


## 5. 사례 연구

**사례 1: 논문 작성:**  논문 작성 과정에서 AI를 활용하여 문헌 조사, 개요 작성, 초고 작성 등을 진행할 수 있습니다. 각 단계별로 대화 내용을 요약하고 저장하여 다음 단계에서 맥락을 유지합니다.

**사례 2: 소설 창작:**  장편 소설을 작성할 때, 각 장의 내용을 요약하고 AI에게 다음 장의 줄거리 및 설정을 제안하도록 요청할 수 있습니다.


## 6. 문제 해결

**문제:**  토큰 제한으로 인해 이전 대화 내용이 잘려서 맥락이 유실됩니다.

**해결 방법:**

* 대화를 작은 세션으로 나눕니다.
* 요약 및 재진술을 활용합니다.
* 외부 메모리를 활용합니다.
* 더 강력한 토큰 관리 기능을 제공하는 AI 모델을 사용합니다. (예:  더 큰 컨텍스트 윈도우를 제공하는 모델)


**문제:**  AI가 이전 대화 내용을 제대로 이해하지 못합니다.

**해결 방법:**

* 프롬프트를 더 명확하고 구체적으로 작성합니다.
* 핵심 키워드를 사용합니다.
* 이전 대화 내용을 요약하여 다시 제공합니다.


이 가이드라인을 통해 AI와의 장기적인 대화에서 맥락을 효과적으로 유지하고 토큰 제한을 극복할 수 있을 것입니다.  항상 목표와 상황에 맞는 전략을 선택하고, 필요에 따라 전략을 수정하는 유연성을 유지하는 것이 중요합니다.
