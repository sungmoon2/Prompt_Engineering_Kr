"""
구체적 용어 사용하기 실습 모듈

Part 1 - 섹션 1.1.3 실습 코드: 형용사와 추상적 개념 대신 구체적 용어를 사용하여 
프롬프트의 명확성과 효과성을 높이는 방법을 학습합니다.
"""

import os
import sys
from typing import Dict, List, Any, Optional

# 상위 디렉토리를 경로에 추가하여 utils 모듈을 import할 수 있게 설정
current_dir = os.path.dirname(os.path.abspath(__file__))
project_root = os.path.dirname(os.path.dirname(os.path.dirname(current_dir)))
sys.path.append(project_root)

from utils.prompt_builder import PromptBuilder
from utils.exercise_template import run_exercise

# 주제 옵션 정의
CONCRETE_TERMS_TOPICS = {
    "1": {"name": "글쓰기 개선", "topic": "글쓰기 능력 향상 방법", "output_format": "가이드"},
    "2": {"name": "프레젠테이션", "topic": "효과적인 프레젠테이션 기술", "output_format": "체크리스트"},
    "3": {"name": "학습 방법", "topic": "효율적인 학습 전략", "output_format": "전략 가이드"},
    "4": {"name": "팀 프로젝트", "topic": "성공적인 팀 프로젝트 운영", "output_format": "실행 계획"},
    "5": {"name": "시간 관리", "topic": "생산적인 시간 관리 방법", "output_format": "방법론"}
}

# 프롬프트 요약 정보
PROMPT_SUMMARY = {
    "basic": ["주제에 대한 직접적인 질문"],
    "enhanced": [
        "추상적 용어 제거: 모호한 형용사와 개념 대신 구체적 명사와 동사 사용",
        "수치화 요청: 정확한 수치와 예시 포함 요청",
        "실행 가능한 표현: 명확하고 실행 가능한 지침 요청"
    ]
}

# 학습 포인트
LEARNING_POINTS = [
    "추상적인 형용사(좋은, 효과적인, 우수한)보다 구체적인 용어가 더 명확한 응답을 이끌어냅니다",
    "모호한 개념 대신 특정 예시, 수치, 지표를 요청하면 실용적인 정보를 얻을 수 있습니다",
    "실행 가능한 동사와 명확한 기준을 사용하면 바로 적용할 수 있는 지침을 얻을 수 있습니다",
    "구체적 용어는 AI의 응답을 보다 정확하게 제한하고 집중시키는 효과가 있습니다"
]

def get_basic_prompt(topic: str) -> str:
    """기본 프롬프트 생성"""
    return f"{topic}에 대해 알려주세요."

def get_enhanced_prompt(topic: str, purpose: str, output_format: str) -> str:
    """향상된 프롬프트 생성"""
    builder = PromptBuilder()
    
    # 역할 및 맥락 설정 - 각 주제에 맞는 전문가 역할 지정
    if "글쓰기" in topic:
        builder.add_role(
            "글쓰기 코치", 
            "대학생과 전문가의 글쓰기 실력을 향상시키는 전문 작문 지도자"
        )
    elif "프레젠테이션" in topic:
        builder.add_role(
            "커뮤니케이션 전문가", 
            "비즈니스 및 학술 프레젠테이션 기술을 가르치는 스피치 코치"
        )
    elif "학습" in topic:
        builder.add_role(
            "학습 전략가", 
            "인지과학을 기반으로 효과적인 학습법을 연구하고 가르치는 교육 전문가"
        )
    elif "팀 프로젝트" in topic:
        builder.add_role(
            "프로젝트 관리자", 
            "다양한 규모의 팀 프로젝트를 성공적으로 이끈 경험이 풍부한 관리자"
        )
    else:
        builder.add_role(
            "생산성 컨설턴트", 
            "개인과 조직의 시간 관리와 생산성 향상을 지원하는 전문가"
        )
    
    # 맥락 정보 추가
    builder.add_context(
        f"저는 대학생으로 {topic}을 향상시키고 싶습니다. "
        f"이론적인 조언보다는 구체적이고 즉시 적용 가능한 기술과 방법이 필요합니다. "
        f"모호한 개념이나 일반적인 조언보다는 명확한 단계, 수치화된 지표, 실제 예시 등 "
        f"구체적인 정보를 바탕으로 한 안내가 필요합니다."
    )
    
    # 구체적인 지시사항 추가 - 추상적 용어 대신 구체적 용어 사용
    if "글쓰기" in topic:
        builder.add_instructions([
            "'좋은 글쓰기'가 아닌 '문장당 단어 15-20개로 제한하는 방법'과 같은 구체적인 기술 5가지를 설명해주세요",
            "'매력적인 도입부' 대신 '독자의 관심을 끌기 위한 3가지 도입부 패턴과 각각의 예시'를 제공해주세요",
            "'논리적 구성'이 아닌 '주제별 문단 구성법과 문단 간 연결 방법'을 구체적으로 설명해주세요",
            "'글쓰기 연습'이 아닌 '주 5회, 회당 25분 작문 훈련 계획'과 같은 구체적인 연습 일정을 제안해주세요",
            "추상적인 개념 없이, 글자 수, 시간, 단계 등 수치화된 정보를 포함해주세요"
        ])
    elif "프레젠테이션" in topic:
        builder.add_instructions([
            "'효과적인 프레젠테이션' 대신 '5-7분 길이의 발표를 위한 슬라이드 6-8장 구성법'과 같은 구체적인 지침을 제공해주세요",
            "'자신감 있는 발표' 대신 '발표 전 45분 준비 루틴과 긴장 완화를 위한 3가지 호흡 기법'을 알려주세요",
            "'청중의 참여 유도' 대신 '5분마다 질문을 통해 청중 참여를 유도하는 3가지 기법'과 같은 구체적인 방법을 설명해주세요",
            "'시각적 자료 활용' 대신 '슬라이드당 텍스트 20단어 이내, 이미지 1-2개 활용 원칙'과 같은 명확한 기준을 제시해주세요",
            "모든 조언에 구체적인 숫자(시간, 길이, 횟수)와 예시 상황을 포함해주세요"
        ])
    elif "학습" in topic:
        builder.add_instructions([
            "'효율적인 학습' 대신 '25분 집중-5분 휴식의 포모도로 기법을 활용한 3시간 학습 계획'과 같은 구체적인 방법론을 제시해주세요",
            "'효과적인 복습' 대신 '24시간, 7일, 30일 간격의 3단계 복습 체계와 각 단계별 10-15분 복습 방법'을 설명해주세요",
            "'집중력 향상' 대신 '학습 시작 전 5분 명상, 스마트폰 1.5m 이상 거리 배치, 2시간마다 10분 산책'과 같은 구체적인 습관을 알려주세요",
            "'이해력 증진' 대신 '학습 내용 요약 50단어 작성법, 타인에게 설명하기 연습, 핵심 개념 연결 마인드맵 그리기' 등 실행 가능한 기술을 제안해주세요",
            "모든 내용은 시간, 횟수, 거리 등 측정 가능한 기준을 포함해주세요"
        ])
    elif "팀 프로젝트" in topic:
        builder.add_instructions([
            "'효과적인 역할 분담' 대신 '팀원별 주 5시간 작업량 설정, 48시간 내 피드백 의무화, 개인별 1-2개 핵심 책임 영역 지정'과 같은 구체적인 기준을 제시해주세요",
            "'원활한 의사소통' 대신 '주 2회 30분 화상회의, 일일 5분 업무 보고, 프로젝트 관리 도구에 8시간마다 진행상황 업데이트'와 같은 명확한 절차를 설명해주세요",
            "'일정 관리' 대신 '5일 단위 스프린트 계획, 각 작업별 시작일-종료일-담당자 명시, 주요 마일스톤 3일 전 중간점검'과 같은 체계적인 방법을 알려주세요",
            "'갈등 해결' 대신 '의견 충돌 시 24시간 냉각기, 각자 300단어 이내 의견서 작성, 중립적 제3자 조정'과 같은 구체적인 프로토콜을 제안해주세요",
            "모든 방법에는 기간, 시간, 길이 등의 측정 가능한 기준과 실제 적용 사례를 포함해주세요"
        ])
    else:  # 시간 관리
        builder.add_instructions([
            "'효율적인 시간 관리' 대신 '하루 3가지 핵심 과제 설정, 90분 집중 블록 4회 배치, 시간당 5분 버퍼 설정'과 같은 구체적인 방법을 알려주세요",
            "'우선순위 설정' 대신 '중요도-긴급성 매트릭스를 활용한 과제 분류, 상위 3개 우선 과제에 하루 총 시간의 70% 할당'과 같은 체계적인 접근법을 설명해주세요",
            "'집중력 유지' 대신 '집중 방해 요소를 줄이기 위한.5개 환경 설정(알림 차단, 소음 제어 이어폰 착용 등)과 2시간마다 10분 휴식'과 같은 구체적인 전략을 제시해주세요",
            "'일과 계획' 대신 '전날 저녁 15분 계획 수립, 오전 첫 90분 집중 작업, 점심 후 15분 일정 재조정'과 같은 명확한 루틴을 제안해주세요",
            "모든 조언에 구체적인 시간, 비율, 횟수 등 측정 가능한 기준을 포함해주세요"
        ])
    
    # 출력 형식 지정
    builder.add_format_instructions(
        f"응답은 {output_format} 형식으로 구성해주세요. "
        f"마크다운 형식을 사용하여 제목, 소제목, 목록 등을 명확히 구분해주세요. "
        f"모든 내용은 추상적인 개념이나 모호한 형용사 없이 구체적인 수치, 예시, 단계로 작성해주세요. "
        f"각 항목은 즉시 실행 가능한 행동 지침 형태로 작성해주세요. "
        f"모든 조언에는 측정 가능한 기준(시간, 길이, 횟수, 비율 등)을 포함해주세요. "
        f"실제 적용 예시와 구체적인 사례를 포함해주세요."
    )
    
    return builder.build()

def main():
    """메인 함수"""
    # 실행 결과를 저장할 때 챕터별 폴더 구조를 사용
    run_exercise(
        title="구체적 용어 사용하기",
        topic_options=CONCRETE_TERMS_TOPICS,
        get_basic_prompt=get_basic_prompt,
        get_enhanced_prompt=get_enhanced_prompt,
        prompt_summary=PROMPT_SUMMARY,
        learning_points=LEARNING_POINTS
    )

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\n\n프로그램이 사용자에 의해 중단되었습니다.")
    except Exception as err:
        print(f"\n오류 발생: {err}")
        print("API 키나 네트워크 연결을 확인하세요.")