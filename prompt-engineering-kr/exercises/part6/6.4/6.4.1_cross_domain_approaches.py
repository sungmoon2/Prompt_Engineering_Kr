"""
실제 사례: 학과별 과제 접근법 실습 모듈

Part 6 - 섹션 6.4.1 실습 코드: 다양한 학문 분야별 특화된 과제 접근법을 학습합니다.
"""

import os
import sys
from typing import Dict, List, Any, Optional

# 상위 디렉토리를 경로에 추가하여 utils 모듈을 import할 수 있게 설정
current_dir = os.path.dirname(os.path.abspath(__file__))
project_root = os.path.dirname(os.path.dirname(os.path.dirname(current_dir)))
sys.path.append(project_root)

from utils.prompt_builder import PromptBuilder
from utils.exercise_template import run_exercise

# 주제 옵션 정의
ACADEMIC_APPROACH_TOPICS = {
    "1": {"name": "경영학 과제", "topic": "경영학 분야의 효과적인 과제 접근법", "output_format": "학과 가이드"},
    "2": {"name": "심리학 과제", "topic": "심리학 분야의 효과적인 과제 접근법", "output_format": "학과 가이드"},
    "3": {"name": "공학 과제", "topic": "공학 분야의 효과적인 과제 접근법", "output_format": "학과 가이드"},
    "4": {"name": "문학/어학 과제", "topic": "문학/어학 분야의 효과적인 과제 접근법", "output_format": "학과 가이드"},
    "5": {"name": "자연과학 과제", "topic": "자연과학 분야의 효과적인 과제 접근법", "output_format": "학과 가이드"}
}

# 프롬프트 요약 정보
PROMPT_SUMMARY = {
    "basic": ["학과 과제에 대한 일반적인 질문"],
    "enhanced": [
        "분야 특화: 특정 학문 분야의 독특한 접근 방식과 방법론 요청",
        "전문가 역할: 해당 분야 교수/연구자로서의 전문적 관점 요청",
        "실제 적용: 구체적인 과제 유형과 단계별 접근법 요청",
        "학문적 맥락: 해당 분야의 학문적 전통과 기대사항 반영 요청"
    ]
}

# 학습 포인트
LEARNING_POINTS = [
    "각 학문 분야는 고유한 연구 방법론, 사고방식, 글쓰기 스타일을 가지고 있습니다",
    "분야별 특화된 용어와 개념을 적절히 활용하면 더 효과적인 응답을 얻을 수 있습니다",
    "각 분야의 학문적 전통과 기대사항을 이해하면 더 적절한 프롬프트를 작성할 수 있습니다",
    "분야별 과제 유형에 맞는 구체적인 접근법과 단계를 요청하면 실용적인 도움을 받을 수 있습니다",
    "학문 분야 간 경계를 넘나드는 통합적 사고와 지식 활용 능력을 기를 수 있습니다"
]

def get_basic_prompt(topic: str) -> str:
    """기본 프롬프트 생성"""
    return f"{topic}에 대해 알려주세요."

def get_enhanced_prompt(topic: str, purpose: str, output_format: str) -> str:
    """향상된 프롬프트 생성"""
    builder = PromptBuilder()
    
    # 분야별 역할 및 맥락 설정
    if "경영학" in topic:
        builder.add_role(
            "경영학 교수", 
            "유명 경영대학에서 학부 및 대학원 과정을 가르치는 경험 많은 교수로, 경영 사례 분석, 전략 수립, 비즈니스 리포트 작성에 전문성을 가지고 있습니다."
        )
        
        builder.add_context(
            f"저는 경영학과 2학년 학생으로 {topic}에 관한 도움이 필요합니다. "
            f"다양한 경영학 과제(사례 분석, 마케팅 계획, 비즈니스 제안서 등)에 접근하는 효과적인 방법을 배우고 싶습니다. "
            f"경영학 분야에서 높은 평가를 받는 과제의 특징과 작성 방법, 교수님들이 기대하는 분석 깊이와 구조에 대해 알고 싶습니다."
        )
        
        builder.add_instructions([
            "경영학 분야에서 자주 접하게 되는 주요 과제 유형들(사례 분석, 전략 보고서, 마케팅 계획 등)을 설명해주세요",
            "경영학 과제 접근 시 특별히 중요한 분석 프레임워크와 모델들을 소개하고 적용 방법을 설명해주세요",
            "데이터 기반 의사결정과 정성적 분석을 균형 있게 통합하는 방법을 제안해주세요",
            "경영학 보고서 작성의 구조적 특징과 효과적인 비즈니스 커뮤니케이션 방법을 설명해주세요",
            "실제 경영 사례를 들어 단계별 접근법을 구체적으로 보여주세요"
        ])
        
    elif "심리학" in topic:
        builder.add_role(
            "심리학 교수", 
            "심리학 연구 방법론과 실험 설계를 전문으로 하는 교수로, 다양한 심리학 하위 분야(임상, 인지, 사회, 발달 등)의 연구 접근법에 정통합니다."
        )
        
        builder.add_context(
            f"저는 심리학과 3학년 학생으로 {topic}에 관한 도움이 필요합니다. "
            f"다양한 심리학 과제(실험 계획서, 연구 제안, 문헌 검토, 사례 연구 등)를 효과적으로 수행하는 방법을 배우고 싶습니다. "
            f"심리학의 과학적 방법론과 윤리적 고려사항을 어떻게 과제에 적용해야 하는지, 그리고 심리학적 주장을 뒷받침하는 적절한 증거 사용법에 대해 알고 싶습니다."
        )
        
        builder.add_instructions([
            "심리학 분야의 주요 과제 유형(문헌 검토, 실험 계획서, 사례 연구 등)과 각각의 접근법을 설명해주세요",
            "심리학 연구에서 중요한 과학적 방법론과 연구 설계 원칙을 상세히 설명해주세요",
            "효과적인 실험 설계, 데이터 수집, 분석 및 해석 방법을 단계별로 안내해주세요",
            "심리학 보고서 작성에서 특히 중요한 APA 형식과 학술적 글쓰기 기법을 설명해주세요",
            "심리학 연구의 윤리적 고려사항과 이를 과제에 반영하는 방법을 포함해주세요"
        ])
        
    elif "공학" in topic:
        builder.add_role(
            "공학 교수", 
            "공학 설계와 문제 해결 방법론을 가르치는 공학 교수로, 다양한 공학 분야의 기술 보고서 작성과 프로젝트 관리에 전문성을 가지고 있습니다."
        )
        
        builder.add_context(
            f"저는 공학과 학생으로 {topic}에 관한 도움이 필요합니다. "
            f"다양한 공학 과제(설계 프로젝트, 기술 보고서, 문제 해결 과제 등)에 효과적으로 접근하는 방법을 배우고 싶습니다. "
            f"엔지니어링 사고방식과 체계적인 문제 해결 접근법, 그리고 공학 분야에서 중요한 기술적 커뮤니케이션 기법에 대해 알고 싶습니다."
        )
        
        builder.add_instructions([
            "공학 분야의 주요 과제 유형(설계 과제, 기술 보고서, 실험 보고서 등)과 각각의 특성을 설명해주세요",
            "엔지니어링 문제 해결 방법론과 설계 프로세스를 단계별로 상세히 설명해주세요",
            "공학 프로젝트에서 중요한 요소(기술적 정확성, 효율성, 실행 가능성, 비용 등)를 평가하는 방법을 설명해주세요",
            "기술 보고서와 문서 작성의 표준 형식과 주의할 점을 안내해주세요",
            "공학 과제에서 시각적 표현(도면, 다이어그램, 그래프 등)을 효과적으로 활용하는 방법을 제안해주세요"
        ])
        
    elif "문학/어학" in topic:
        builder.add_role(
            "문학/어학 교수", 
            "비평 이론과 텍스트 분석을 전문으로 하는 문학/어학 교수로, 문학 작품 분석, 언어학 연구, 비평적 에세이 작성 지도에 풍부한 경험을 가지고 있습니다."
        )
        
        builder.add_context(
            f"저는 문학/어학과 학생으로 {topic}에 관한 도움이 필요합니다. "
            f"문학 작품 분석, 비평 에세이, 언어학 연구 보고서와 같은 과제에 효과적으로 접근하는 방법을 배우고 싶습니다. "
            f"텍스트 분석 방법, 비평 이론의 적용, 그리고 문학/어학 분야의 학술적 글쓰기 특성에 대해 이해하고 싶습니다."
        )
        
        builder.add_instructions([
            "문학/어학 분야의 주요 과제 유형(텍스트 분석, 비평 에세이, 언어학 연구 등)과 각각의 접근법을 설명해주세요",
            "문학 텍스트 분석의 다양한 방법론과 비평 이론을 소개하고 적용 예시를 제시해주세요",
            "효과적인 논증 구성과 텍스트 증거 활용 방법을 단계별로 안내해주세요",
            "문학/어학 분야 특유의 학술적 글쓰기 스타일과 형식적 특징을 설명해주세요",
            "독창적인 해석과 분석을 개발하는 방법과 기존 학술 담론과의 연결성을 확립하는 방법을 제안해주세요"
        ])
        
    elif "자연과학" in topic:
        builder.add_role(
            "자연과학 교수", 
            "과학적 방법론과 실험 설계를 가르치는 자연과학 교수로, 다양한 과학 분야의 연구 논문 작성과 데이터 분석에 전문성을 가지고 있습니다."
        )
        
        builder.add_context(
            f"저는 자연과학(물리학/화학/생물학/지구과학 등) 전공 학생으로 {topic}에 관한 도움이 필요합니다. "
            f"실험 보고서, 연구 논문, 데이터 분석 과제 등에 효과적으로 접근하는 방법을 배우고 싶습니다. "
            f"과학적 방법론의 엄격한 적용, 데이터의 정확한 수집과 분석, 그리고 과학적 주장을 뒷받침하는 증거 제시 방법에 대해 알고 싶습니다."
        )
        
        builder.add_instructions([
            "자연과학 분야의 주요 과제 유형(실험 보고서, 연구 논문, 데이터 분석 등)과 각각의 특성을 설명해주세요",
            "과학적 방법론과 실험 설계의 원칙을 상세히 설명하고 실제 적용 예시를 제시해주세요",
            "데이터 수집, 분석, 통계적 처리 및 시각화의 효과적인 방법을 단계별로 안내해주세요",
            "과학 보고서와 논문의 표준 구조(IMRAD: 서론, 방법, 결과, 논의)와 각 섹션 작성 요령을 설명해주세요",
            "과학적 주장을 뒷받침하는 증거 제시와 기존 연구와의 연계성을 확립하는 방법을 포함해주세요"
        ])
        
    else:
        builder.add_role(
            "학문 방법론 전문가", 
            "다양한 학문 분야의 연구 방법론과 학술적 글쓰기에 정통한 전문가로, 학생들이 각 분야에 맞는 효과적인 과제 접근법을 개발하도록 돕습니다."
        )
        
        builder.add_context(
            f"저는 대학생으로 {topic}에 관한 도움이 필요합니다. "
            f"다양한 학문 분야의 과제에 효과적으로 접근하는 방법을 배우고 싶습니다. "
            f"각 분야별 특화된 연구 방법론, 사고방식, 글쓰기 스타일을 이해하고, "
            f"구체적인 과제 유형에 따른 단계별 접근법을 알고 싶습니다."
        )
        
        builder.add_instructions([
            f"{topic}에 포함된 학문 분야의 특성과 고유한 학문적 전통을 설명해주세요",
            "각 분야의 주요 과제 유형과 그에 맞는 접근법을 비교하여 설명해주세요",
            "분야별 연구 방법론과 사고 체계의 차이점을 분석해주세요",
            "각 분야의 학술적 글쓰기 스타일과 형식적 특징을 비교해주세요",
            "다양한 학문 분야를 넘나드는 통합적 접근법의 장점과 적용 방법도 제안해주세요"
        ])
    
    # 출력 형식 지정
    builder.add_format_instructions(
        f"응답은 {output_format} 형식으로 구성해주세요. "
        f"마크다운 형식을 사용하여 제목, 소제목, 목록 등을 명확히 구분해주세요. "
        f"다음 구조를 포함해주세요: "
        f"1) 해당 학문 분야의 특성과 학문적 접근법 소개 "
        f"2) 주요 과제 유형별 특징과 요구사항 "
        f"3) 효과적인 과제 접근을 위한 단계별 가이드 "
        f"4) 분야별 핵심 방법론과 프레임워크 설명 "
        f"5) 학술적 글쓰기 및 프레젠테이션 기법 "
        f"6) 실제 사례 또는 예시를 통한 적용 방법 "
        f"표, 체크리스트, 흐름도 등 시각적 요소를 적절히 활용하여 이해를 돕고, "
        f"해당 분야의 전문 용어를 적절히 사용하되 초보자도 이해할 수 있도록 간략한 설명을 포함해주세요."
    )
    
    return builder.build()

def main():
    """메인 함수"""
    # 실행 결과를 저장할 때 챕터별 폴더 구조를 사용
    run_exercise(
        title="실제 사례: 학과별 과제 접근법",
        topic_options=ACADEMIC_APPROACH_TOPICS,
        get_basic_prompt=get_basic_prompt,
        get_enhanced_prompt=get_enhanced_prompt,
        prompt_summary=PROMPT_SUMMARY,
        learning_points=LEARNING_POINTS
    )

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\n\n프로그램이 사용자에 의해 중단되었습니다.")
    except Exception as err:
        print(f"\n오류 발생: {err}")
        print("API 키나 네트워크 연결을 확인하세요.")